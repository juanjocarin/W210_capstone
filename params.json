{
  "name": "SmartCam",
  "tagline": "MIDS Capstone Project",
  "body": "# Overview\r\n\r\nSurveillance cameras are ~~ubiquitous~~ everywhere. Both ~~individuals and organizations~~ home and business users want to be alerted of any unexpected presence at their house or premises.\r\n\r\nVideo image processing made it possible to record only what is needed (e.g., when motion or the presence of a certain object or person is detected) instead of indefinitely. Combined with machine learning techniques, it also allows to search patterns that can be useful for businesses such as finding hot spots, the most common paths taken by customers, and the most affluent hours. Hence, surveillance is not the only ~~feature~~ benefit of monitoring systems for business users.\r\n\r\n\r\n### Problem Statement\r\n\r\nMonitoring systems used to be ~~complex and~~ expensive. The advent of open-source computer-vision libraries like *OpenCV* and inexpensive single-board computers such as the *Raspberry Pi* has made building a monitoring system easier than ever, but  a solution based on them still presents some challenges to potential users:\r\n\r\n+ There are no out-of-the-box solutions like this: users need ~~the skills~~ to integrate the required hardware and software components.\r\n\r\n+ Depending on the user's needs, the hardware must have enough computing power to perform certain operations.\r\n\r\n+ Some users may require an integrated system that receives videos from different cameras / locations.\r\n\r\n### Our Proposal\r\n\r\nWe have built a **cloud-based video monitoring system able to detect motion and count human faces** (we focused on these two features, but others could be easily added in the future), that is simple and inexpensive but also powerful, reliable, and scalable. \r\n\r\nThe system is aimed at two customer segments: **home** and **business users** (stores, offices, malls, . . .). Everything they need (at each location they want to monitor) is a Raspberry Pi with a camera module; most of the ~~video~~ processing is done in the cloud and all the information is accessible through a web browser.\r\n\r\n### Value Proposition\r\n\r\nOur system is:\r\n\r\n+ **Cost-effective**: all the required hardware is a Raspberry Pi with a camera, whose price keeps dropping (the same applies to cloud computing and \r\n\r\n+ **Easy-to-install**: users can purchase an standard Raspberry Pi at their convenience and install the necessary software by themselves (following a list of simple steps), or acquire one with the software pre-installed from us.\r\n    + ~~An added benefit for home users in rented houses, who usually do not have the liberty to install comprehensive alarm systems.~~\r\n\r\n+ **Scalable**: adding more cameras is just a matter of installing and registering additional Raspberry Pis.\r\n\r\nOther benefits:\r\n\r\n+ Users have **real-time** access to the information: alerts, analytics, and video files.\r\n\r\n+ **Dual functionality** (especially for business users): The system can be used for surveillance purposes (e.g., once the store is closed) and also to get ~~helpful~~ insights to optimize business. For example, it can provide information about the amount of people entering a store (or moving through it) over time, which can be used to predict sales or adjust staff levels.\r\n    + The face counting feature can also be helpful for home users, once face recognition is added: alerts would not be sent if the face of a person has been previously added to the system.\r\n\r\n+ The video files are stored in the cloud (so there is no risk that the Raspberry Pi will run out of storage).\r\n\r\n<font color='red'>---------TO BE DELETED---------</font>\r\n\r\n<font color='red'>*Value proposition is a clear statement that*</font>\r\n\r\n<font color='red'>+ *explains how your product solves customers’ problems or improves their situation (**relevancy**),*\r\n+ *delivers specific benefits (**quantified value**), and*\r\n+ *tells the ideal customer why they should buy from you and not from the competition (**unique differentiation**).*</font>\r\n\r\n<font color='red'>---------(END OF) TO BE DELETED---------</font>\r\n\r\n\r\n# Our Solution\r\n\r\n### Architecture\r\n\r\nAs mentioned, the user just needs a [Raspberry Pi](https://www.raspberrypi.org/)[^1]  with a [camera module](https://www.raspberrypi.org/products/camera-module/). We chose [Amazon Web Services (AWS)](https://aws.amazon.com/) as our cloud infrastructure, where the video files and a database with information related to them (where they came from, when they were recorded, and information about the detected motion) are stored, and additional video processing is performed. All the information is accessible through an interactive website (like [this one](#user-interface) you're now visiting).\r\n\r\n[^1]: We used several [Raspberry Pi 2 Model B](https://www.raspberrypi.org/products/raspberry-pi-2-model-b/), the latest model as of February 2016, when we started working on this project.\r\n\r\n![Architecture Diagram](https://raw.githubusercontent.com/smart-cam/smart-cam/gh-pages/images/Architecture.png)\r\n\r\n### Step-by-step Process\r\n\r\n1. **Motion detection** is performed by the **Raspberry Pi**, using [Python](https://www.python.org/) as programming language and [OpenCV](http://opencv.org/) libraries for video processing.\r\n    + From all the motion detection algorithms available in OpenCV, we selected one[^2] based on [Gaussian Mixture Model-based foreground and background segmentation](http://www.ee.surrey.ac.uk/CVSSP/Publications/papers/KaewTraKulPong-AVBS01.pdf): a background probability model is constructed for each pixel, adapting to background changes by incrementally updating the mean and variance of existing Gaussians, incorporating some and discarding others.\r\n    + For each frame in the video, the background and foreground are segmented: the former will be largely static over consecutive frames[^3], so substantial changes are detected and assigned to the latter (and the background is then subtracted).\r\n    + The foreground may contain some noise (e.g., due to small changes in lighting conditions), which would result in false positives (motion is detected in the absence of it). To reduce the presence of those, we set a threshold to the number of pixels in a (320×240) frame that correspond to the foreground, whose final value is 0.05 (3,840 pixels).\r\n\r\n[^2]: We also tried many other alternatives, and finally chose the one above based on its performance in terms of Sensitivity and Precision.\r\n\r\n[^3]: Even small changes in shadowing and lighting conditions can make the background vary, but the algorithm provides some mechanisms to discern between those effects and actual motion, so only the latter is included in the foreground. Of course those mechanisms are not perfect, so the best results are obtained under controlled lighting conditions (and using fixed-mounted cameras).\r\n\r\n2. The step above allows to **upload to the cloud** only those videos of interest, in which motion has been detected. The camera is constantly working, and upon motion detection a video file (of 10 seconds) is uploaded to a bucket in [Amazon S3](https://aws.amazon.com/s3/). Information about the video file (the Raspberry Pi ID, the timestamp, ...) and the foreground size (the ratio of pixels corresponding to foreground) is also written in a [DynamoDB](https://aws.amazon.com/dynamodb/) (NoSQL) database, in JSON format.\r\n\r\n3. Another Python program running in an [Amazon EC2](https://aws.amazon.com/ec2/) virtual server reads from both sources (S3 and DynamoDB) to **count faces** in each video. The script queries the database for still unprocessed videos, runs the face counting algorithm on those, and updates the database.\r\n\t+ We used a [cascade classifier](http://docs.opencv.org/3.0-alpha/modules/objdetect/doc/cascade_classification.html) based on the [Viola–Jones object detection framework](https://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework), which is capable of processing images extremely rapidly while achieving high detection rates. \r\nFirst, a cascade[^4] of boosted[^5] classifiers is trained with a few hundred sample views of a particular object (a face, in our case), called positive examples, and negative examples (arbitrary images of similar size). After the classifer is trained, it will output a 1 if the region is likely to show the object, and 0 otherwise. To search for the object in the whole image and in different sizes, the search window is moved across and the scan procedure is done several times at different scales.\r\n\t+ Doing this part of the video processing (and others that might be added in the future) in the cloud has the advantage of **freeing up the Raspberry Pi from using its limited resources**.\r\n\r\n[^4]: The classifier consists of several simpler classifiers (stages) that are applied subsequently to a region of interest until at some stage the candidate is rejected or all the stages are passed.\r\n\r\n[^5]: The classifiers at every stage of the cascade are complex themselves and built out of basic classifiers (decision trees with at least 2 leaves) using a boosting technique (weighted voting), e.g., one of the multiple variants of Adaboost.\r\n\r\n4. Finally, the user can access all the videos and information stored in S3 and DynamoDB, respectively, through an interactive website ([see below for an example](#user-interface)), where he or she can overview, zoom, filter, and drill up and down the foreground size and face count of all the videos recorded by the Raspberry Pis, as well as play them.\r\n\r\n\r\n# Challenges\r\n\r\n....\r\n\r\n\r\n# User Interface\r\n\r\n...\r\n\r\n\r\n# Possible Improvements\r\n\r\n+ Improve the system's Sensitivity and Precision (and hence the its Accuracy). I.e., minimize the amount of false positives (motion is detected in the absence of it) and false negatives (there is motion but it's not detected).\r\n    + Recall that:\r\n\r\n$$\\text{Sensitivity} = \\frac{TP}{TP+FN}; \\ \\ \\text{Precision} = \\frac{TP}{TP+FP}$$ $$\\text{Accuracy}=\\frac{TP+TN}{TP+TN+FP+FN}$$\r\n\r\n+ Improve face detection (considering other algorithms aside from Viola Jones).\r\n\r\n+ Add more video processing features.\r\n    + Such as face recognition, which would allow the system to alert of certain individuals or not, or keep track of the ones it has already detected (thus counting all the different people that has been recorded so far).\r\n![Architecture Diagram](https://raw.githubusercontent.com/smart-cam/smart-cam/gh-pages/images/FaceCounting.png)\r\n\r\n+ Implement an alert system that sends an email to the user upon certain events (whenever a video is captured, if the number of faces exceeds a certain threshold, etc.).\r\n\r\n\r\n# Our Team\r\n\r\n+ [James Route](https://github.com/jamesrt95)\r\n+ [Juan Jose Carin](https://github.com/juanjocarin)\r\n+ [Sayantan Satpati](https://github.com/sayantansatpati)\r\n+ [Vineet Gangwar](https://github.com/vgangwar)\r\n\r\n\r\n# Support / Contact\r\n\r\nWould you like to know more about this project or our team? Check out our [code](https://github.com/smart-cam/smart-cam) or [contact us](mailto:mids-w210@googlegroups.com ) and we'll be glad to tell you more.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}